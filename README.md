![html2rss logo](https://github.com/html2rss/html2rss/raw/master/support/logo.png)

# html2rss-web

This web application scrapes websites to build and deliver RSS 2.0 feeds with a modern, responsive interface.

**Features:**

- **Modern UI**: Clean, responsive Astro-based frontend with component architecture
- **Feed Gallery**: Browse and discover popular RSS feeds
- **Auto Source**: Generate feeds from any website automatically
- **Stable URLs**: Provides stable URLs for feeds generated by automatic sourcing
- **Public Feed Access**: Secure, token-based public access to RSS feeds without authentication headers
- **Custom Feeds**: [Create your custom feeds](https://html2rss.github.io/web-application/tutorials/building-feeds)!
- **Pre-built Configs**: Comes with plenty of [included configs](https://html2rss.github.io/web-application/how-to/use-included-configs)
- **Performance**: Handles request caching and sets caching-related HTTP headers
- **Progressive Enhancement**: Works without JavaScript, enhanced with modern features
- **Security**: URL restrictions, authentication, SSRF protection, and input validation

**Architecture:**

- **Backend**: Ruby + Roda for API and RSS generation
- **Frontend**: Astro for modern, fast static site generation
- **Core Engine**: [`html2rss`](https://github.com/html2rss/html2rss) Ruby gem for feed generation

## Configuration

The application can be configured using environment variables. See the [configuration guide](CONFIGURATION.md) for details.

### Security Features

- **URL Restrictions**: Public instances can restrict auto source to specific URLs
- **Authentication**: Token-based authentication for auto source and health check endpoints
- **Public Feed Access**: Secure, stateless feed tokens for public RSS access
- **HMAC-SHA256 Signing**: Cryptographically signed tokens prevent tampering
- **URL Binding**: Feed tokens are bound to specific URLs for security
- **SSRF Protection**: Built-in protection against Server-Side Request Forgery
- **Input Validation**: Comprehensive validation of all inputs
- **XML Sanitization**: Prevents XML injection attacks in RSS output
- **CSP Headers**: Content Security Policy headers prevent XSS attacks

## Public Feed Access

The application now supports secure public access to RSS feeds without requiring authentication headers. This is perfect for sharing feeds with RSS readers and other applications.

### How It Works

1. **Create a Feed**: Use the auto source feature to generate a feed
2. **Get Public URL**: The system returns a public URL with an embedded token
3. **Share the URL**: Anyone can access the feed using this URL
4. **Secure Access**: The token is cryptographically signed and URL-bound

### Example

```bash
# Create a feed
curl -X POST "https://your-domain.com/auto_source/create" \
  -H "Authorization: Bearer your-token" \
  -d "url=https://example.com&name=Example Feed"

# Response includes public_url
{
  "id": "abc123",
  "name": "Example Feed", 
  "url": "https://example.com",
  "public_url": "/feeds/abc123?token=...&url=https%3A%2F%2Fexample.com"
}

# Access the feed publicly
curl "https://your-domain.com/feeds/abc123?token=...&url=https%3A%2F%2Fexample.com"
```

### Security Features

- **10-Year Expiry**: Tokens are valid for 10 years (perfect for RSS)
- **URL Binding**: Tokens only work for their specific URL
- **HMAC Signing**: Tokens cannot be tampered with
- **No Server Storage**: Stateless validation, no database required

## Documentation

For full documentation, please see the [html2rss-web documentation](https://html2rss.github.io/web-application/).

### Security and Deployment

- [Security Guide](SECURITY.md) - Comprehensive security documentation
- [Project Website](https://html2rss.github.io/html2rss-web/) - Deployment and usage instructions

## Quick Start

This application is designed to be used via Docker Compose only.

### Prerequisites

- Docker and Docker Compose installed
- Git (to clone the repository)

### Setup and Run

1. **Clone the repository:**
   ```bash
   git clone https://github.com/html2rss/html2rss-web.git
   cd html2rss-web
   ```

2. **Generate a secret key:**
   ```bash
   openssl rand -hex 32
   ```

3. **Configure docker-compose.yml:**
   ```bash
   # Edit the file and replace 'your-generated-secret-key-here' with your actual secret key
   # The docker-compose.yml file is already included in the repository
   ```

4. **Start the application:**
   ```bash
   docker-compose up
   ```

The application will be available at `http://localhost:3000`.

**⚠️ Important**: The `HTML2RSS_SECRET_KEY` environment variable is required. Without it, the application will not start and will display setup instructions.

### Frontend Development

The project includes a modern Astro frontend alongside the Ruby backend:

1. **Frontend development:**

   ```bash
   cd frontend
   npm install
   npm run dev
   ```

2. **Build frontend:**
   ```bash
   cd frontend
   npm run build
   ```

**Development Workflow:**

- **`make dev`** - Starts both Ruby server (port 3000) and Astro dev server (port 4321) with hot reload
- **Ruby server** - Serves the API and built frontend at `/app` and `/app/gallery`
- **Astro dev server** - Provides hot reload for frontend development at `http://localhost:4321`
- **Hot reload** - Changes to frontend files automatically rebuild and refresh

### Development Commands

| Command              | Description                           |
| -------------------- | ------------------------------------- |
| `make help`          | Show all available commands           |
| `make setup`         | Full development setup                |
| `make dev`           | Start both Ruby and Astro dev servers |
| `make dev-ruby`      | Start Ruby server only                |
| `make dev-frontend`  | Start Astro dev server only           |
| `make test`          | Run all tests (Ruby + Frontend)       |
| `make test-ruby`     | Run Ruby tests only                   |
| `make test-frontend` | Run frontend tests only               |
| `make lint`          | Run all linters (Ruby + Frontend)     |
| `make lint-ruby`     | Run Ruby linter only                  |
| `make lint-js`       | Run frontend linter only              |
| `make lintfix`       | Auto-fix all linting issues           |
| `make lintfix-ruby`  | Auto-fix Ruby linting issues          |
| `make lintfix-js`    | Auto-fix frontend linting issues      |
| `make clean`         | Clean temporary files                 |

### Frontend Commands

| Command                        | Description                   |
| ------------------------------ | ----------------------------- |
| `cd frontend && npm install`   | Install frontend dependencies |
| `cd frontend && npm run dev`   | Start frontend dev server     |
| `cd frontend && npm run build` | Build frontend for production |

## Contributing

Contributions are welcome! Please see the [contributing guide](https://html2rss.github.io/get-involved/contributing) for more information.

## Sponsoring

If you find this project useful, please consider [sponsoring the project](https://github.com/sponsors/gildesmarais).
